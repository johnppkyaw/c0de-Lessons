<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="04-Caption.css">
  <title>Caption maker</title>
</head>
<body>
  <div class="video-container">
    <video
  class="videoElement"
  src="https://songz.c0d3.com/js4/exercises/pubDomainRemix.mp4"
  controls>
  </video>
  </div>
  <div class="caption-container">
    <h3>Add Caption</h3>
    <input type="text" placeholder="Caption" id="caption-field">
    <input type="number" placeholder="Start (ms)" id="start-time"> <br>
    <input type="number" placeholder="End (ms)" id="end-time">
    <button type="button" id="save-button">Save</button>
    <hr>
    <div class="subtitle-container"></div>
  </div>
  

<script>
  const video = document.querySelector('.videoElement')
  const saveButton = document.querySelector('#save-button')
  const captionField = document.querySelector('#caption-field')
  const startTimeField = document.querySelector('#start-time')
  const endTimeField = document.querySelector('#start-time')
  const captionContainer = document.querySelector('.subtitle-container')
  const captionsList = [{text: "hello", start: 0, end: 5}, {text: "world", start: 5, end: 10}];

  render();

  function render() {
    captionContainer.innerHTML = ""
    captionsList.forEach((caption, index) => {
      const eachCaptionDiv = document.createElement('div');
      eachCaptionDiv.setAttribute('class', 'each-caption');
      const captionDiv = document.createElement('h5');
      const startDiv = document.createElement('p');
      const endDiv = document.createElement('p');
      captionDiv.innerText = caption.text;
      startDiv.innerText = caption.start;
      endDiv.innerText = caption.end;
      eachCaptionDiv.appendChild(captionDiv)
      eachCaptionDiv.appendChild(startDiv)
      eachCaptionDiv.appendChild(endDiv)
      captionContainer.appendChild(eachCaptionDiv);

      eachCaptionDiv.addEventListener('click', () => {
        if(confirm('Do you want to delete this caption?')) {
          captionsList.splice(index, 1);
          render()
        }
      })
    })
  }

  saveButton.addEventListener('click', () => {

  })

  setTimeout(() => {
    video.addEventListener('timeupdate', evt => {
      console.log('The current attribute has been updated: ', evt)
      console.log(video.currentTime * 1000, 'current time')
    })
  }, 1000)
</script>    
</body>
</html>
